<div class="container mx-auto p-4 border-b-2 border-gray-200">
    <h1 class="text-4xl font-bold mb-4">Submit new Polls</h1>
    <div *ngFor="let poll of polls" class="mb-4 p-4 border rounded-lg shadow-lg">
        <div class="mb-2">
            <h3 class="text-xl font-semibold">{{ poll.question }}</h3>
            <small class="text-gray-500">Created at: {{ poll.createdAt | date:'short' }}</small>
        </div>
        <div *ngFor="let option of poll.options; let i = index" class="my-2">
            <input class="mr-2" type="radio" name="option{{ poll._id }}" [value]="i"
                [(ngModel)]="selectedOptions[poll._id]" />
            <label class="font-medium">
                {{ option }}
            </label>
        </div>
        <button class="mt-3 px-4 py-2 bg-blue-500 text-white rounded"
            (click)="submitVote(poll._id, selectedOptions[poll._id])">Submit Vote</button>

        <div class="text-gray-600 mt-4" *ngIf="poll.totalVotes > 0">
            <h4 class="font-semibold">Results:</h4>
            <p>Correct Votes: {{ poll.correctVotes }}</p>
            <p>Total Votes: {{ poll.totalVotes }}</p>
            <p>Correct Answer: {{ poll.options[poll.correctAnswerIndex] }}</p>
            <p>
                Percentage of Correct Votes:
                {{ getPercentage(poll.correctVotes, poll.totalVotes) | number: '1.0-2' }}%
            </p>
        </div>
    </div>
</div>